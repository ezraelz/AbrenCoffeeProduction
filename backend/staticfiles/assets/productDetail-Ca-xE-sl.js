import{t as m,r as c,a as p,j as e,y as s,i as d}from"./index-CqnK1jY6.js";const j=()=>{const{id:n}=m(),[r,l]=c.useState(null),[u,o]=c.useState(!0),a=p();c.useEffect(()=>{(async()=>{try{o(!0);const t=localStorage.getItem("access_token");if(!t){s.error("Authentication token missing");return}const i=await d.get(`/products/detail/${n}`,{headers:{Authorization:`Bearer ${t}`}});if(i.status!==200)throw new Error("Product not found");l(i.data)}catch(t){t instanceof Error?s.error("Fetch failed: "+t.message):s.error("Fetch failed: An unknown error occurred")}finally{o(!1)}})()},[n]);const h=()=>{a(`/admin/products/update/${n}`)},f=async()=>{if(window.confirm("Are you sure you want to delete this product?"))try{const t=localStorage.getItem("access_token");if(!t){s.error("Authentication token missing");return}await d.delete(`/products/delete/${n}`,{headers:{Authorization:`Bearer ${t}`}}),s.success("Product deleted successfully"),a("/products")}catch(t){t instanceof Error?s.error("Delete failed: "+t.message):s.error("Delete failed: An unknown error occurred")}};return u?e.jsx("div",{children:"Loading product details..."}):r?e.jsxs("div",{className:"product-detail",children:[e.jsx("h2",{children:"Product Detail"}),e.jsxs("div",{className:"product-detail-card",children:[e.jsx("img",{src:`http://127.0.0.1:8000/${r.image}`,alt:""}),e.jsxs("div",{className:"product-detail-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",r.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",r.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",r.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",r.price]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Stock:"})," ",r.stock]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created At:"})," ",new Date(r.created_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"button-group mt-4",children:[e.jsx("button",{className:"btn btn-primary mr-2",onClick:h,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:f,children:"Delete"})]})]}):e.jsx("div",{children:"No product data available"})};export{j as default};
