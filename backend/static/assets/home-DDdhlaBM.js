import{r as n,j as e,i as x,y as f,k as N,a as v,B as b,L as w}from"./index-C8JB_fxv.js";import{e as C,f as y}from"./index-CLMEIW_F.js";import{O as S,H as I}from"./ourstory-C60l_Wb_.js";const k=({show:a,productId:i,userId:d})=>{const[o,t]=n.useState(!1),[c,r]=n.useState(!1),[m,h]=n.useState([]);n.useEffect(()=>{(async()=>{const u=localStorage.getItem("access_token");try{const j=await x.get("/wishlist/list/",{headers:u?{Authorization:`Bearer ${u}`}:{}});h(j.data)}catch(j){console.error("Failed to fetch wishlist",j)}})()},[]),n.useEffect(()=>{const s=m.some(u=>u.product.id===i);t(s)},[m,i]);const l=async()=>{r(!0);const s=localStorage.getItem("access_token");try{await x.post("/wishlist/create/",{product:i,user:d},{headers:{Authorization:`Bearer ${s}`}}),t(!0),f.success("✅ Added to wishlist!")}catch{f.error("❌ Failed to add to wishlist.")}finally{r(!1)}};return a?e.jsx("button",{onClick:l,disabled:c||o,className:"wish-button",children:o?"💖":"🤍"}):null},E=()=>{const[a,i]=n.useState([]),{addItem:d}=N(),o=v(),[t,c]=n.useState(!1),r=n.useRef(0),m=3,h=()=>{const l=window.scrollY;l>r.current?c(!0):c(!1),r.current=l};return n.useEffect(()=>(window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)),[]),n.useEffect(()=>{(async()=>{const s=await x.get("/products/list/");i(s.data.slice(0,m))})()},[]),e.jsxs("div",{className:"trending-products",children:[e.jsx("h1",{children:"Trending Products"}),a.length>0?e.jsx("div",{className:"product_container",children:a.map((l,s)=>e.jsxs("div",{className:t?"product_card anime":"product_card",children:[e.jsx("img",{src:l.image,alt:""}),e.jsxs("div",{className:"description",children:[e.jsx("p",{children:l.name}),e.jsxs("p",{children:["$",l.price]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"addCart",onClick:()=>d(l),type:"button",children:"Add to Cart"}),e.jsx("button",{className:"viewCart",onClick:()=>o(`/product/${l.id}`),type:"button",children:"View Product"})]}),e.jsx(k,{show:!0,productId:l.id,userId:1})]},s))}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"loading-products",children:"Loading products...."})})]})},B=()=>{const[a,i]=n.useState([]),[d,o]=n.useState(0),t=3,c=v();n.useEffect(()=>{(async()=>{try{const u=await x.get("/blog/list/");i(u.data)}catch(u){console.error("Error fetching blogs:",u)}})()},[]);const r=Math.ceil(a.length/t);n.useEffect(()=>{if(a.length===0)return;const s=setInterval(()=>{o(u=>(u+1)%r)},5e3);return()=>clearInterval(s)},[a.length,r]);const m=()=>{o(s=>(s+1)%r)},h=()=>{o(s=>(s-1+r)%r)},l=a.slice(d*t,(d+1)*t);return e.jsx("div",{className:"home-blog",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"section-title",children:"Latest from the Blog"}),e.jsx("p",{className:"section-description",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellat ccusantium, unde sunt fugit quaerat cupiditate nesciunt recusandae sapiente?"}),e.jsx("div",{className:"home-blog-cards",children:a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",title:"prev",onClick:h,className:"arrow",disabled:a.length===0,children:e.jsx(C,{})}),l.map(s=>e.jsx("div",{className:"home-blog-card",onClick:()=>c(`/blog/detail/${s.id}`),children:e.jsxs("div",{className:"card-content",children:[e.jsx("img",{src:`http://127.0.0.1:8000/${s.image}`,alt:s.title}),e.jsx("h3",{children:s.title}),e.jsxs("p",{className:"meta",children:["By ",s.author_username," ·"," ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("p",{children:[s.content.slice(0,100),"..."]}),e.jsx("button",{title:"readmore",className:"readmore-button",onClick:()=>c(`/blog/detail/${s.id}`),children:"Read more..."})]})},s.id)),e.jsx("button",{type:"button",title:"next",onClick:m,className:"arrow",disabled:a.length===0,children:e.jsx(y,{})})]})})]})})},L="/static/assets/person_2-BOsjfWUh.jpg",_="/static/assets/person_3-CI-003NU.jpg",A="/static/assets/person_4-CFJh5yzE.jpg",g=[{quote:"Great service!",name:"Alice",position:"Designer",image:L},{quote:"Loved the experience.",name:"Bob",position:"Developer",image:_},{quote:"Highly recommended!",name:"Charlie",position:"Marketer",image:A}],D=()=>{const[a,i]=n.useState(0);n.useEffect(()=>{const t=setInterval(()=>{i(c=>(c+1)%g.length)},8e3);return()=>clearInterval(t)},[]);const d=(a-1+g.length)%g.length,o=(a+1)%g.length;return e.jsxs("div",{className:"slider",children:[e.jsx("h1",{children:"Testimony"}),g.map((t,c)=>{let r="card";return c===a?r+=" active":c===d?r+=" prev":c===o?r+=" next":r+=" hidden",e.jsxs("div",{className:r,children:[e.jsx("img",{src:t.image,alt:t.name}),e.jsxs("div",{className:"text",children:[e.jsx("h3",{children:t.name}),e.jsx("p",{children:t.position}),e.jsx("q",{children:t.quote})]})]},c)})]})},P="/static/assets/bg_1-ExwbCvXU.jpg",R="/static/assets/bg_2-DRRVo1UI.jpg",F="/static/assets/bg_3-CLXpHu8m.jpg",p=({iconClass:a,target:i,label:d})=>{const[o,t]=n.useState(0);return n.useEffect(()=>{let c=0;const m=i/(2e3/50),h=setInterval(()=>{c+=m,c>=i?(clearInterval(h),t(i)):t(Math.ceil(c))},50);return()=>clearInterval(h)},[i]),e.jsx("div",{className:"counter-wrap",children:e.jsxs("div",{className:"text",children:[e.jsx("div",{className:"icon",children:e.jsx("span",{className:a,children:e.jsx(b,{})})}),e.jsx("strong",{className:"number",children:o}),e.jsx("span",{children:d})]})})};function W(){return e.jsxs("section",{className:"ftco-counter",id:"section-counter",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsx(p,{iconClass:"flaticon-coffee-cup",target:100,label:"Coffee Branches"}),e.jsx(p,{iconClass:"flaticon-coffee-cup",target:85,label:"Number of Awards"}),e.jsx(p,{iconClass:"flaticon-coffee-cup",target:10567,label:"Happy Customers"}),e.jsx(p,{iconClass:"flaticon-coffee-cup",target:900,label:"Staff"})]})})]})}const U=()=>{const[a,i]=n.useState(0),d=[{img:P,alt:""},{img:R,alt:""},{img:F,alt:""}];return n.useEffect(()=>{const o=setInterval(()=>{i(t=>(t+1)%d.length)},3e3);return()=>clearInterval(o)},[]),e.jsxs("div",{className:"home-section",children:[e.jsxs("div",{className:"home-content",style:{backgroundImage:`url(${d[a].img})`,backgroundSize:"cover",backgroundPosition:"center",transition:"background-image 1s ease-in-out"},children:[e.jsx("span",{className:"mb-4",children:"Abren Coffee"}),e.jsx("p",{className:"mb-4",children:"A small river named Duden flows by their place and supplies it with the necessary regelialia."}),e.jsx(w,{to:"/shop",className:"shop-button",children:"Shop Now"})]}),e.jsx(E,{}),e.jsx(W,{}),e.jsx(S,{}),e.jsx(B,{}),e.jsx(D,{}),e.jsx(I,{})]})};export{U as default};
