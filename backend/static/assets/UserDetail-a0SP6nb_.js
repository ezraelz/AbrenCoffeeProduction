import{u as E,r,j as e,i as f}from"./index-D7n0z3Iu.js";const k=()=>{const{id:o}=E(),[t,d]=r.useState(null),[p,u]=r.useState(!0),[h,v]=r.useState(""),[i,a]=r.useState(null),[l,n]=r.useState("");r.useEffect(()=>{(async()=>{try{u(!0);const c=localStorage.getItem("access_token"),m=await f.get(`/users/detail/${o}`,{headers:{Authorization:`Bearer ${c}`}});if(m.status!==200)throw new Error("User not found");d(m.data)}catch{v("Failed to fetch user")}finally{u(!1)}})()},[o]);const x=s=>{t&&(a(s),n(String(t[s])))},j=()=>{a(null),n("")},g=async()=>{if(!(!t||!i))try{const s=localStorage.getItem("access_token"),c=await f.patch(`/users/update/${t.id}/`,{[i]:l},{headers:{Authorization:`Bearer ${s}`}});d(c.data),a(null),n("")}catch(s){s instanceof Error?alert("Update failed: "+s.message):alert("Update failed: An unknown error occurred")}};return p?e.jsx("div",{children:"Loading user details..."}):h?e.jsxs("div",{children:["Error: ",h]}):t?e.jsxs("div",{className:"user-detail",children:[e.jsx("h2",{children:"User Detail"}),e.jsxs("div",{className:"detail-card",children:[e.jsx("img",{src:t.profile_image,alt:""}),e.jsxs("div",{className:"user-detail-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",t.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Username:"})," ",t.username]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",i==="email"?e.jsxs(e.Fragment,{children:[e.jsx("input",{title:"email",type:"email",value:l,onChange:s=>n(s.target.value)}),e.jsx("button",{onClick:g,children:"Save"}),e.jsx("button",{onClick:j,children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[t.email,e.jsx("button",{onClick:()=>x("email"),children:"Edit"})]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",i==="role"?e.jsxs(e.Fragment,{children:[e.jsxs("select",{title:"role",value:l,onChange:s=>n(s.target.value),children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"customer",children:"customer"}),e.jsx("option",{value:"user",children:"User"})]}),e.jsx("button",{onClick:g,children:"Save"}),e.jsx("button",{onClick:j,children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[t.role,e.jsx("button",{onClick:()=>x("role"),children:"Edit"})]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",t.isActive?"Active":"Inactive"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Joined:"})," ",new Date(t.date_joined).toLocaleDateString()]})]})]})]}):e.jsx("div",{children:"No user data available"})};export{k as default};
