import{t as P,a as k,r as a,j as e,i as j,y as n}from"./index-CqnK1jY6.js";const $=()=>{const{id:r}=P(),y=k(),[v,N]=a.useState(null),[b,o]=a.useState(!0),[u,i]=a.useState(""),[l,d]=a.useState(0),[p,m]=a.useState(""),[h,x]=a.useState(""),[g,f]=a.useState(0);a.useEffect(()=>{(async()=>{try{o(!0);const c=localStorage.getItem("access_token"),s=(await j.get(`/products/detail/${r}/`,{headers:{Authorization:`Bearer ${c}`}})).data;N(s),i(s.name),d(s.price),m(s.category),x(s.stock),f(s.quantity)}catch{n.error("Fetch failed: ")}finally{o(!1)}})()},[r]);const S=async t=>{t.preventDefault();try{const c=localStorage.getItem("access_token");await j.put(`/products/update/${r}`,{name:u,price:l,category:p,stock:h,quantity:g},{headers:{Authorization:`Bearer ${c}`}}),n.success("Product updated successfully"),y(`/products/${r}`)}catch{n.error("Update failed: ")}};return b?e.jsx("div",{className:"center-text",children:"Loading product info..."}):v?e.jsxs("div",{className:"update-container",children:[e.jsx("h2",{className:"update-title",children:"Update Product"}),e.jsxs("form",{onSubmit:S,className:"update-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",title:"name",value:u,onChange:t=>i(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"number",title:"price",value:l,onChange:t=>d(parseFloat(t.target.value)),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsx("input",{type:"text",title:"category",value:p,onChange:t=>m(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stock"}),e.jsx("input",{type:"text",title:"stock",value:h,onChange:t=>x(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quantity"}),e.jsx("input",{type:"text",title:"quantity",value:g,onChange:t=>f(Number(t.target.value)),required:!0})]}),e.jsx("button",{type:"submit",className:"submit-button",children:"Update Product"})]})]}):e.jsx("div",{className:"center-text error",children:"Product not found"})};export{$ as default};
